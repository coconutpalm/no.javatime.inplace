<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<meta name=Generator content="Microsoft Word 14 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
h1
	{mso-style-link:"Heading 1 Char";
	margin-top:24.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Cambria","serif";
	color:#365F91;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:13.0pt;
	font-family:"Cambria","serif";
	color:#4F81BD;}
h3
	{mso-style-link:"Heading 3 Char";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:11.0pt;
	font-family:"Cambria","serif";
	color:#4F81BD;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:5.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:5.0pt;
	margin-left:11.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:5.0pt;
	margin-left:22.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"Header Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"Footer Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"Title Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:15.0pt;
	margin-left:0cm;
	border:none;
	padding:0cm;
	font-size:26.0pt;
	font-family:"Cambria","serif";
	color:#17365D;
	letter-spacing:.25pt;}
p.MsoTitleCxSpFirst, li.MsoTitleCxSpFirst, div.MsoTitleCxSpFirst
	{mso-style-link:"Title Char";
	margin:0cm;
	margin-bottom:.0001pt;
	border:none;
	padding:0cm;
	font-size:26.0pt;
	font-family:"Cambria","serif";
	color:#17365D;
	letter-spacing:.25pt;}
p.MsoTitleCxSpMiddle, li.MsoTitleCxSpMiddle, div.MsoTitleCxSpMiddle
	{mso-style-link:"Title Char";
	margin:0cm;
	margin-bottom:.0001pt;
	border:none;
	padding:0cm;
	font-size:26.0pt;
	font-family:"Cambria","serif";
	color:#17365D;
	letter-spacing:.25pt;}
p.MsoTitleCxSpLast, li.MsoTitleCxSpLast, div.MsoTitleCxSpLast
	{mso-style-link:"Title Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:15.0pt;
	margin-left:0cm;
	border:none;
	padding:0cm;
	font-size:26.0pt;
	font-family:"Cambria","serif";
	color:#17365D;
	letter-spacing:.25pt;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"Balloon Text Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Tahoma","sans-serif";}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:36.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:36.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading
	{margin-top:24.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Cambria","serif";
	color:#365F91;
	font-weight:bold;}
span.HeaderChar
	{mso-style-name:"Header Char";
	mso-style-link:Header;}
span.FooterChar
	{mso-style-name:"Footer Char";
	mso-style-link:Footer;}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Cambria","serif";
	color:#365F91;
	font-weight:bold;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Cambria","serif";
	color:#4F81BD;
	font-weight:bold;}
span.BalloonTextChar
	{mso-style-name:"Balloon Text Char";
	mso-style-link:"Balloon Text";
	font-family:"Tahoma","sans-serif";}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Cambria","serif";
	color:#4F81BD;
	font-weight:bold;}
span.TitleChar
	{mso-style-name:"Title Char";
	mso-style-link:Title;
	font-family:"Cambria","serif";
	color:#17365D;
	letter-spacing:.25pt;}
.MsoChpDefault
	{font-family:"Calibri","sans-serif";}
.MsoPapDefault
	{margin-bottom:10.0pt;
	line-height:115%;}
 /* Page Definitions */
 @page WordSection1
	{size:595.3pt 841.9pt;
	margin:70.85pt 70.85pt 70.85pt 70.85pt;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body lang=EN-US link=blue vlink=purple>

<div class=WordSection1>

<div style='border:none;border-bottom:solid #4F81BD 1.0pt;padding:0cm 0cm 4.0pt 0cm'>

<p class=MsoTitle><span style='font-size:20.0pt'>Basic Tutorial: Activating the
Hello World Bundle</span></p>

</div>

<p class=MsoTocHeading>Contents</p>

<p class=MsoToc2><a href="#_Toc336442204">Overview<span style='color:windowtext;
display:none;text-decoration:none'>.. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></p>

<p class=MsoToc2><a href="#_Toc336442205">Step 1: Create a HelloWorld bundle
with the New Plug-in Project Wizard<span style='color:windowtext;display:none;
text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></p>

<p class=MsoToc2><a href="#_Toc336442206">Step 2: Activate and run the
HelloWorld Bundle<span style='color:windowtext;display:none;text-decoration:
none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>3</span></a></p>

<p class=MsoToc3><a href="#_Toc336442207">Setting the Eager Activation Policy<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>4</span></a></p>

<p class=MsoToc3><a href="#_Toc336442208">Setting the Bundle Class-Path<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>4</span></a></p>

<p class=MsoToc3><a href="#_Toc336442209">Activating the Bundle<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>4</span></a></p>

<p class=MsoToc2><a href="#_Toc336442210">Step 3: Managing the Bundle Life
Cycle<span style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>5</span></a></p>

<p class=MsoToc3><a href="#_Toc336442211">Changing the Source<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>5</span></a></p>

<p class=MsoToc3><a href="#_Toc336442212">Manage the Bundle Life Cycle.<span
style='color:windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>6</span></a></p>

<p class=MsoNormal>&nbsp;</p>

<h2><a name="_Toc336442204">Overview</a></h2>

<p class=MsoNormal>This tutorial guides you through the steps of managing the
life cycle of a bundle, including activating and executing the bundle based on
source code changes.  </p>

<h2><a name="_Toc336442205">Step 1: Create a HelloWorld bundle with the New Plug-in
Project Wizard</a></h2>

<p class=MsoNormal>Inside Eclipse select the menu item <b>File | New | Other |
Plug-in Project...</b>. to open the <b>New Plug-in Project</b> wizard.</p>

<p class=MsoNormal><img width=444 height=498
src="Basic%20Tutorial%20Activating%20Bundles_files/image001.png" alt=" "></p>

<p class=MsoNormal>Enter HelloWorld in the Project Name field.  Select the “<b>an
OSGi framework”</b> radio button in the Target Platform section. Make sure that
you select Equinox or Standard in the drop down box following the target radio button.
Then click <b>Next</b> twice. </p>

<p class=MsoNormal>Select the <b>Hello OSGi Bundle</b> template and click <b>Finish</b>.</p>

<p class=MsoNormal><img width=443 height=507
src="Basic%20Tutorial%20Activating%20Bundles_files/image002.png" alt=" "></p>

<p class=MsoNormal>This tutorial use the Java perspective, but you may use any
perspective. If not <b>Build Automatically</b> is on, you have to manually
build the project before you can activate the HelloWorld bundle.  For this tutorial
check the <b>Build Automatically</b> menu item in the Project main menu.</p>

<h2><a name="_Toc336442206">Step 2: Activate and run the HelloWorld Bundle</a></h2>

<p class=MsoNormal>If not visible, select <b>Bundle | Open Bundle List Page</b>
from the Bundle main menu.  </p>

<p class=MsoNormal><img width=511 height=258
src="Basic%20Tutorial%20Activating%20Bundles_files/image003.png" alt=" "></p>

<p class=MsoNormal>In the <b>Bundle List Page</b> we see that the HelloWorld
bundle is deactivated and uninstalled. The project must also be free from build
errors to get activated.</p>

<p class=MsoNormal><img width=626 height=376
src="Basic%20Tutorial%20Activating%20Bundles_files/image004.png" alt=" "></p>

<h3><a name="_Toc336442207">Setting the Activation Policy</a></h3>

<p class=MsoNormal>By default the <a
href="../tasks/Setting%20Bundle%20Options.htm#SetActivationPolicyToEagerOnActivate">Set
Activation Policy to Eager on Activate</a> option in the bundle main menu is
enabled.  This means that if the activation policy is lazy for the bundle it is
set to an eager activation policy when the bundle is activated. The policy is
set to lazy for the Hello OSGi Bundle template when generated by the “New PIug-in
Project” wizard. In general this tells us that when a bundle has a lazy
activation policy, the bundle will not be loaded into memory when started. The
class loading first happens when someone need some capability or functionality
from the bundle. Someone may for instance be another bundle, an external tool
or a user activating a requiring bundle through the UI. In our case we want the
activation policy to be Eager so the bundle runs when we activate it. To
achieve this assure that the <b>Set Activation Policy to Eager on Activate </b>option
is checked in the Bundle main menu. An alternative is to remove the <b>Bundle-ActivationPolicy:
lazy</b> header from the manifest file or from the overview tab in the manifest
editor.</p>

<p class=MsoNormal>If you activate the bundle with a lazy activation policy,
you can always change this after the bundle is activated by enabling the <a
href="../tasks/Setting%20Bundle%20Options.htm#EagerActivationPolicy">Eager Activation
Policy</a> menu entry from the pop-up context menu in the bundle view</p>

<h3><a name="_Toc336442208">Setting the Bundle-ClassPath</a></h3>

<p class=MsoNormal>Also assure that the <a
href="../tasks/Setting%20Bundle%20Options.htm#AddbintoBundleClassPathonActivate">Update
Bundle Class-Path on Activate/Deactivate</a> is checked in the Bundle main
menu. This is the default and instructs OSGi to resolve and load the classes
from the default output folder directory.  This is the same as set as the <a
href="../tasks/Setting%20Bundle%20Options.htm#OutputFolder">output folder</a>
in the <b>New Plug-in Project </b>wizard.</p>

<p class=MsoNormal>See <a href="../tasks/Setting%20Bundle%20Options.htm">Setting
Bundle Options</a> for an explanation of all available options.</p>

<h3><a name="_Toc336442209">Activating the Bundle</a></h3>

<p class=MsoNormal>To activate and run the bundle select <b>Bundle | Activate Workspace
(1) </b>from the Eclipse main menu.</p>

<p class=MsoNormal>When the bundle is activated in-place it is first installed,
then resolved and lastly started.  When successfully started the bundle enters
the ACTIVE state. This can be seen in the Bundle List Page where the State
field has changed from UNINSTALLED to ACTIVE.  Starting a bundle loads the
bundle in to memory and executes the Start method in the Activator class of the
bundle.</p>

<p class=MsoNormal><img border=0 width=640 height=382
src="Basic%20Tutorial%20Activating%20Bundles_files/image005.png" alt=" "></p>

<p class=MsoNormal>The HelloWorld bundle prints “Hello World!” in the Start
method and “Goodbye World!” in the Stop method as can be seen in the Start and
Stop methods in the helloworld.Activator class. The output is displayed in the Bundle
Console.  If the Bundle Console is hidden, you can bring it up by selecting <b>Show
Console Page</b> from the Bundle main menu.</p>

<h2><a name="_Toc336442210">Step 3: Managing the Bundle Life Cycle</a></h2>

<p class=MsoNormal>After a bundle is activated, it participates in a round trip
cycle of code change, build and execution, as illustrated in this last step of this
tutorial.</p>

<h3><a name="_Toc336442211">Changing the Source</a></h3>

<p class=MsoNormal>Open helloworld.Activator.java and change the print statement
in the start method to<span style='font-size:10.0pt;line-height:115%;
font-family:Consolas;color:black'>:</span></p>

<p class=MsoNormal style='text-indent:35.4pt'><span style='font-size:10.0pt;
line-height:115%;font-family:Consolas;color:black'>System.out.println (&quot;Hello
World!! You have changed&quot;);</span></p>

<p class=MsoNormal>And the print statement in the Stop method to:</p>

<p class=MsoNormal>                <span style='font-size:10.0pt;line-height:
115%;font-family:Consolas;color:black'>System.out.println (&quot;Goodbye
World!! I'll be back&quot;);</span></p>

<p class=MsoNormal>Then save the file. If <b>Build Automatically</b> is checked
and the <a href="../tasks/Setting%20Bundle%20Options.htm#UpdateOnBuild">Update
on Build</a> option in the main bundle menu is enabled you should see the
following in the Bundle Console:</p>

<p class=MsoNormal><img border=0 width=644 height=442
src="Basic%20Tutorial%20Activating%20Bundles_files/image006.png" alt=" "></p>

<p class=MsoNormal>After the bundle has been built, it is updated. If the
bundle is in state ACTIVE when updated it is first stopped, unresolved and
uninstalled.  The changed bundle is then read from the bundle location,
installed, updated and lastly started again.</p>

<p class=MsoNormal>This is illustrated in the Bundle Console, where ”Good Bye
World!!” is the result of invoking the Stop method, which prints a message to
standard out, when the bundle is stopped. Note that “I’ll be back” is not part
of the printout when the bundle is stopped the first time.  This is because the
changes in the Activator class have not been read and the changed bundle is not
updated at that time. The last message in the console view is the result of the
OSGi start operation invoking the Start method printing the new message from
the updated bundle. </p>

<h3><a name="_Toc336442212">Manage the Bundle Life Cycle.</a></h3>

<p class=MsoNormal>So far we have been through the most common lifecycle workflow;
- Activating a bundle; -Performing code changes and saving the file; which - Trigger
an automatic build; which results in an - Update and a restart of the bundle
with the newly built source. The source code changes part is done by you, and
the rest of the bundle operations are done behind the scenes, triggered by an
automatic build.</p>

<p class=MsoNormal style='text-align:justify'>The life cycle of a bundle is also
controlled through menu and tool bar commands. There is one main menu and a
context menu when selecting a project in Package Explorer or a bundle in the
Bundle List Page. As a short cut you may use the tool bar in the Bundle List
Page.  The menus are dynamic in the sense that they are changing dependent on
the state of the different workspace bundles you are working with.  In our case
we have one active bundle. This allows for the following life cycle commands:</p>

<p class=MsoNormal style='text-align:justify'><img border=0 width=554
height=302 src="Basic%20Tutorial%20Activating%20Bundles_files/image007.png"
alt=" "></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b>Deactivate </b></p>

<p class=MsoNormal>When deactivating the HelloWorld bundle it is stopped,
un-resolved and uninstalled. In the uninstalled state, the bundle is not active
in the workspace, and the InPlace Activator will ignore it, until activated
again. See <a href="../tasks/Activate%20and%20Deactivate%20Bundles.htm">Activate
and Deactivate Bundles</a> for a detailed explanation of the Activate and
Deactivate commands.</p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b>Stop</b></p>

<p class=MsoNormal>If you select the Stop menu item, the stop method is
invoked, and the “Goodbye …” message is printed to the console. After stopping
the bundle, it can be started from the same menu entry. See <a
href="../tasks/Start%20and%20Stop%20Bundles.htm">Start and Stop Bundles</a> for
a detailed explanation of the Start and Stop commands.</p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b>Refresh</b></p>

<p class=MsoNormal>Refresh is an operation that renews the bundle by moving it
to the installed state and then resolves it before starting it again, provided
that it was in the active state before it was refreshed. You will see the start
and stop messages in the console when you try it. Resolve is the process of
renewing all dependencies between bundles. This is discussed in more depth in <a
href="../tasks/Update%20and%20Refresh.htm">Update and Refresh Bundles</a>. There
is also a tutorial illustrating this when working with <a
href="Tutorial%20Working%20with%20Multiple%20Bundles.htm">multiple bundles</a>
that are dependent on each other.</p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b>Reset</b></p>

<p class=MsoNormal>Resetting the workspace or a bundle is a way to get a clean
workspace state where all revisions are released and new revisions created. All
workspace bundles will only have one revision after a reset. See <a
href="../tasks/Resetting%20Bundles.htm">Resetting Bundles</a> for a detailed
explanation of the Reset command.</p>

<p class=MsoNormal> </p>

<p class=MsoNormal>This completes the basic tutorial. Thanks for your time.</p>

</div>

</body>

</html>
